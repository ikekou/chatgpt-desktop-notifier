(()=>{"use strict";chrome.runtime.onMessage.addListener(((o,e,t)=>(console.log("📨 メッセージを受信しました:",o),"SHOW_NOTIFICATION"===o.type?(console.log("🎯 SHOW_NOTIFICATION メッセージを処理します"),function(o){console.log("📣 通知を作成します:",o);const e=`chatgpt-notification-${Date.now()}`;console.log("🏷 生成された通知ID:",e);try{chrome.notifications.create(e,{type:"basic",iconUrl:chrome.runtime.getURL("icons/icon128.png"),title:"ChatGPT Response",message:o,priority:2},(o=>{chrome.runtime.lastError?console.error("❌ 通知の作成に失敗しました:",chrome.runtime.lastError):console.log("✅ 通知が正常に作成されました。ID:",o)})),setTimeout((()=>{chrome.notifications.clear(e,(o=>{console.log(`🧹 通知のクリア ${o?"成功":"失敗"}:`,e)}))}),5e3)}catch(o){console.error("❌ 予期せぬエラーが発生しました:",o)}}(o.text),t({success:!0})):(console.log("⚠️ 未知のメッセージタイプです:",o.type),t({success:!1,error:"Unknown message type"})),!0)))})();