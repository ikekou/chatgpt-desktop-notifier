(()=>{"use strict";const e=document.getElementById("soundEnabled"),t=document.getElementById("desktopEnabled"),n=document.getElementById("testSound"),c=document.getElementById("testNotification"),d=document.getElementById("status");function s(){const n={soundEnabled:e.checked,desktopEnabled:t.checked};chrome.storage.sync.set(n,(()=>{o("設定を保存しました")}))}function o(e){d.textContent=e,d.classList.add("show"),setTimeout((()=>{d.classList.remove("show")}),2e3)}chrome.storage.sync.get(["soundEnabled","desktopEnabled"],(n=>{e.checked=n.soundEnabled??!0,t.checked=n.desktopEnabled??!0})),e.addEventListener("change",s),t.addEventListener("change",s),n.addEventListener("click",(function(){e.checked?(function(){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(440,e.currentTime),n.gain.setValueAtTime(.1,e.currentTime),t.start(),t.stop(e.currentTime+.2)}(),o("🔊 音声通知をテストしました")):o("⚠️ 音声通知が無効になっています")})),c.addEventListener("click",(function(){t.checked?(chrome.runtime.sendMessage({type:"SHOW_NOTIFICATION",text:"これはテスト通知です。ChatGPT Desktop Notifierは正常に動作しています。"}),o("💬 デスクトップ通知をテストしました")):o("⚠️ デスクトップ通知が無効になっています")}))})();